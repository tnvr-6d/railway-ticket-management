--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2025-07-29 22:07:47

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 260 (class 1255 OID 41825)
-- Name: log_login_attempt(integer, character varying, character varying, boolean); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.log_login_attempt(p_passenger_id integer, p_ip_address character varying, p_device_info character varying, p_is_success boolean) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO login_history (passenger_id, login_time, ip_address, device_info, is_success) -- Use original column name
    VALUES (p_passenger_id, CURRENT_TIMESTAMP, p_ip_address, p_device_info, p_is_success); -- Use original parameter
END;
$$;


ALTER FUNCTION public.log_login_attempt(p_passenger_id integer, p_ip_address character varying, p_device_info character varying, p_is_success boolean) OWNER TO postgres;

--
-- TOC entry 261 (class 1255 OID 41826)
-- Name: process_ticket_cancellation(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.process_ticket_cancellation() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_cancellation_reason TEXT;
    v_admin_id INTEGER;
    v_refund_amount NUMERIC(10, 2);
BEGIN
    -- This logic only runs when a ticket status changes from 'Pending' to 'Cancelled'
    IF OLD.status = 'Pending Cancellation' AND NEW.status = 'Cancelled' THEN

        -- Get the cancellation reason from the booking table
        SELECT b.cancellation_reason INTO v_cancellation_reason
        FROM booking b
        JOIN ticket_booking tb ON b.booking_id = tb.booking_id
        WHERE tb.ticket_id = NEW.ticket_id;

        -- Get the admin_id from the session variable set by the Node.js app
        v_admin_id := CAST(current_setting('myapp.current_admin_id', true) AS INTEGER);

        -- Generate a random refund amount
        v_refund_amount := (random() * (200 - 50) + 50);

        -- Make the seat available again
        UPDATE seat_inventory
        SET is_available = TRUE
        WHERE schedule_id = NEW.schedule_id AND seat_number = NEW.seat_number;

        -- Insert the log into the ticket_cancellation table
        INSERT INTO ticket_cancellation (ticket_id, cancellation_date, refund_amount, reason, processed_by, status)
        VALUES (NEW.ticket_id, CURRENT_TIMESTAMP, v_refund_amount, v_cancellation_reason, v_admin_id, 'Processed');
        
    END IF;

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.process_ticket_cancellation() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 217 (class 1259 OID 41827)
-- Name: admin; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.admin (
    admin_id integer NOT NULL,
    username character varying(50) NOT NULL,
    password_hash character varying(255) NOT NULL,
    email character varying(100) NOT NULL,
    role character varying(20) NOT NULL,
    is_active boolean DEFAULT true NOT NULL,
    last_login timestamp without time zone,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.admin OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 41832)
-- Name: admin_admin_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.admin ALTER COLUMN admin_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.admin_admin_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 219 (class 1259 OID 41833)
-- Name: booking; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.booking (
    booking_id integer NOT NULL,
    passenger_id integer NOT NULL,
    booking_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    payment_id integer NOT NULL,
    cancellation_reason text
);


ALTER TABLE public.booking OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 41839)
-- Name: booking_booking_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.booking ALTER COLUMN booking_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.booking_booking_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 221 (class 1259 OID 41840)
-- Name: class; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.class (
    class_id integer NOT NULL,
    class_type character varying(50) NOT NULL
);


ALTER TABLE public.class OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 41843)
-- Name: class_class_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.class ALTER COLUMN class_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.class_class_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 41844)
-- Name: coach; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.coach (
    coach_id integer NOT NULL,
    coach_number character varying(50) NOT NULL,
    class_id integer NOT NULL
);


ALTER TABLE public.coach OWNER TO postgres;

--
-- TOC entry 5174 (class 0 OID 0)
-- Dependencies: 223
-- Name: COLUMN coach.class_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.coach.class_id IS 'Foreign key to the class this coach belongs to.';


--
-- TOC entry 224 (class 1259 OID 41847)
-- Name: coach_coach_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.coach ALTER COLUMN coach_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.coach_coach_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 41848)
-- Name: discount; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.discount (
    discount_id integer NOT NULL,
    code character varying(50),
    discount_percentage numeric(5,2),
    booking_id integer,
    passenger_id integer,
    used_at timestamp without time zone
);


ALTER TABLE public.discount OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 41851)
-- Name: discount_discount_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.discount ALTER COLUMN discount_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.discount_discount_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 227 (class 1259 OID 41852)
-- Name: discount_info; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.discount_info (
    discount_id integer NOT NULL,
    processed_by integer NOT NULL,
    is_active boolean DEFAULT true,
    start_date date NOT NULL,
    end_date date NOT NULL
);


ALTER TABLE public.discount_info OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 41856)
-- Name: fare; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.fare (
    fare_id integer NOT NULL,
    per_km_fare numeric(10,2) NOT NULL,
    class_id integer NOT NULL
);


ALTER TABLE public.fare OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 41859)
-- Name: fare_fare_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.fare ALTER COLUMN fare_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.fare_fare_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 230 (class 1259 OID 41860)
-- Name: feedback; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.feedback (
    feedback_id integer NOT NULL,
    passenger_id integer NOT NULL,
    ticket_id integer NOT NULL,
    subject character varying(100) NOT NULL,
    message text NOT NULL,
    status character varying(20) DEFAULT 'Pending'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.feedback OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 41867)
-- Name: feedback_feedback_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.feedback ALTER COLUMN feedback_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.feedback_feedback_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 41868)
-- Name: login_history; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.login_history (
    login_id integer NOT NULL,
    passenger_id integer NOT NULL,
    login_time timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    ip_address character varying(45) NOT NULL,
    device_info character varying(255),
    is_success boolean NOT NULL
);


ALTER TABLE public.login_history OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 41872)
-- Name: login_history_login_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.login_history ALTER COLUMN login_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.login_history_login_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 234 (class 1259 OID 41873)
-- Name: notification; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.notification (
    notification_id integer NOT NULL,
    status character varying(20) DEFAULT 'Unread'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.notification OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 41878)
-- Name: notification_info; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.notification_info (
    passenger_id integer NOT NULL,
    notification_id integer NOT NULL,
    message text NOT NULL,
    type character varying(50) NOT NULL
);


ALTER TABLE public.notification_info OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 41883)
-- Name: notification_notification_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.notification ALTER COLUMN notification_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.notification_notification_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 237 (class 1259 OID 41884)
-- Name: passenger; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.passenger (
    passenger_id integer NOT NULL,
    name character varying(100) NOT NULL,
    email character varying(100) NOT NULL,
    phone_number character varying(20) NOT NULL,
    address character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    password_hash character varying(255)
);


ALTER TABLE public.passenger OWNER TO postgres;

--
-- TOC entry 238 (class 1259 OID 41890)
-- Name: passenger_passenger_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.passenger ALTER COLUMN passenger_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.passenger_passenger_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 239 (class 1259 OID 41891)
-- Name: payment; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.payment (
    payment_id integer NOT NULL,
    amount numeric(10,2) NOT NULL,
    payment_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    transaction_id character varying(100),
    payment_status character varying(20) DEFAULT 'Completed'::character varying NOT NULL
);


ALTER TABLE public.payment OWNER TO postgres;

--
-- TOC entry 240 (class 1259 OID 41896)
-- Name: payment_payment_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.payment ALTER COLUMN payment_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.payment_payment_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 241 (class 1259 OID 41897)
-- Name: route; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.route (
    route_id integer NOT NULL,
    source_station_id integer NOT NULL,
    destination_station_id integer NOT NULL,
    distance numeric(10,2) NOT NULL,
    duration integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.route OWNER TO postgres;

--
-- TOC entry 242 (class 1259 OID 41901)
-- Name: route_route_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.route ALTER COLUMN route_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.route_route_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 243 (class 1259 OID 41902)
-- Name: route_station; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.route_station (
    route_station_id integer NOT NULL,
    route_id integer NOT NULL,
    station_id integer NOT NULL,
    arrival_time time without time zone,
    departure_time time without time zone
);


ALTER TABLE public.route_station OWNER TO postgres;

--
-- TOC entry 244 (class 1259 OID 41905)
-- Name: route_station_route_station_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.route_station ALTER COLUMN route_station_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.route_station_route_station_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 245 (class 1259 OID 41906)
-- Name: schedule; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.schedule (
    schedule_id integer NOT NULL,
    train_id integer NOT NULL,
    route_id integer NOT NULL,
    departure_time time without time zone NOT NULL,
    arrival_time time without time zone NOT NULL,
    departure_date date NOT NULL,
    status character varying(20) DEFAULT 'On Time'::character varying NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.schedule OWNER TO postgres;

--
-- TOC entry 246 (class 1259 OID 41911)
-- Name: schedule_schedule_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.schedule ALTER COLUMN schedule_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.schedule_schedule_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 247 (class 1259 OID 41912)
-- Name: seat_inventory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.seat_inventory (
    inventory_id integer NOT NULL,
    schedule_id integer NOT NULL,
    seat_number character varying(10) NOT NULL,
    is_available boolean DEFAULT true NOT NULL,
    row_number integer NOT NULL,
    column_number integer NOT NULL,
    coach_id integer NOT NULL
);


ALTER TABLE public.seat_inventory OWNER TO postgres;

--
-- TOC entry 248 (class 1259 OID 41916)
-- Name: seat_inventory_inventory_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.seat_inventory ALTER COLUMN inventory_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.seat_inventory_inventory_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 249 (class 1259 OID 41917)
-- Name: station; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.station (
    station_id integer NOT NULL,
    station_name character varying(100) NOT NULL,
    location character varying(255) NOT NULL,
    contact_info character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.station OWNER TO postgres;

--
-- TOC entry 250 (class 1259 OID 41923)
-- Name: station_station_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.station ALTER COLUMN station_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.station_station_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 251 (class 1259 OID 41924)
-- Name: ticket; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ticket (
    ticket_id integer NOT NULL,
    fare_id integer NOT NULL,
    passenger_id integer NOT NULL,
    schedule_id integer NOT NULL,
    booking_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    seat_number character varying(10) NOT NULL,
    price numeric(10,2) NOT NULL,
    status character varying(20) DEFAULT 'Booked'::character varying NOT NULL,
    payment_id integer NOT NULL
);


ALTER TABLE public.ticket OWNER TO postgres;

--
-- TOC entry 252 (class 1259 OID 41929)
-- Name: ticket_booking; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ticket_booking (
    ticket_id integer NOT NULL,
    booking_id integer NOT NULL
);


ALTER TABLE public.ticket_booking OWNER TO postgres;

--
-- TOC entry 253 (class 1259 OID 41932)
-- Name: ticket_cancellation; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ticket_cancellation (
    cancellation_id integer NOT NULL,
    ticket_id integer NOT NULL,
    cancellation_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    refund_amount numeric(10,2),
    reason text,
    processed_by integer NOT NULL,
    status character varying(20) DEFAULT 'Pending'::character varying NOT NULL
);


ALTER TABLE public.ticket_cancellation OWNER TO postgres;

--
-- TOC entry 254 (class 1259 OID 41939)
-- Name: ticket_cancellation_cancellation_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.ticket_cancellation ALTER COLUMN cancellation_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ticket_cancellation_cancellation_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 255 (class 1259 OID 41940)
-- Name: ticket_ticket_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.ticket ALTER COLUMN ticket_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.ticket_ticket_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 256 (class 1259 OID 41941)
-- Name: train; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.train (
    train_id integer NOT NULL,
    train_name character varying(100) NOT NULL,
    total_seats integer NOT NULL,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.train OWNER TO postgres;

--
-- TOC entry 259 (class 1259 OID 49224)
-- Name: train_coach; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.train_coach (
    train_coach_id integer NOT NULL,
    train_id integer NOT NULL,
    coach_id integer NOT NULL,
    coach_order integer
);


ALTER TABLE public.train_coach OWNER TO postgres;

--
-- TOC entry 5175 (class 0 OID 0)
-- Dependencies: 259
-- Name: TABLE train_coach; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.train_coach IS 'Junction table to define the composition of a train with multiple coaches.';


--
-- TOC entry 5176 (class 0 OID 0)
-- Dependencies: 259
-- Name: COLUMN train_coach.coach_order; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.train_coach.coach_order IS 'The sequential order of the coach within the train composition (e.g., 1, 2, 3...).';


--
-- TOC entry 258 (class 1259 OID 49223)
-- Name: train_coach_train_coach_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.train_coach_train_coach_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.train_coach_train_coach_id_seq OWNER TO postgres;

--
-- TOC entry 5177 (class 0 OID 0)
-- Dependencies: 258
-- Name: train_coach_train_coach_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.train_coach_train_coach_id_seq OWNED BY public.train_coach.train_coach_id;


--
-- TOC entry 257 (class 1259 OID 41947)
-- Name: train_train_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.train ALTER COLUMN train_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.train_train_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 4873 (class 2604 OID 49227)
-- Name: train_coach train_coach_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train_coach ALTER COLUMN train_coach_id SET DEFAULT nextval('public.train_coach_train_coach_id_seq'::regclass);


--
-- TOC entry 5126 (class 0 OID 41827)
-- Dependencies: 217
-- Data for Name: admin; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.admin (admin_id, username, password_hash, email, role, is_active, last_login, created_at) FROM stdin;
1	admin	admin_hash_123	admin@railway.gov.bd	Super Admin	t	\N	2025-06-23 11:42:14.348511
2	station_manager	manager_hash_456	manager@railway.gov.bd	Station Manager	t	\N	2025-06-23 11:42:14.348511
3	booking_clerk	clerk_hash_789	clerk@railway.gov.bd	Booking Clerk	t	\N	2025-06-23 11:42:14.348511
4	ticket_inspector	inspector_hash_001	inspector@railway.gov.bd	Ticket Inspector	t	\N	2025-07-09 00:45:16.760782
5	traffic_controller	controller_hash_002	controller@railway.gov.bd	Traffic Controller	t	\N	2025-07-09 00:45:16.760782
6	station_clerk	clerk_hash_003	clerk2@railway.gov.bd	Station Clerk	t	\N	2025-07-09 00:45:16.760782
7	security_officer	security_hash_004	security@railway.gov.bd	Security Officer	t	\N	2025-07-09 00:45:16.760782
8	maintenance_head	maintenance_hash_005	maintenance@railway.gov.bd	Maintenance Head	t	\N	2025-07-09 00:45:16.760782
9	finance_officer	finance_hash_006	finance@railway.gov.bd	Finance Officer	t	\N	2025-07-09 00:45:16.760782
10	hr_manager	hr_hash_007	hr@railway.gov.bd	HR Manager	t	\N	2025-07-09 00:45:16.760782
11	operations_manager	operations_hash_008	operations@railway.gov.bd	Operations Manager	t	\N	2025-07-09 00:45:16.760782
12	system_admin	system_hash_009	sysadmin@railway.gov.bd	System Admin	t	\N	2025-07-09 00:45:16.760782
13	audit_officer	audit_hash_010	audit@railway.gov.bd	Audit Officer	t	\N	2025-07-09 00:45:16.760782
14	customer_service	customer_hash_011	customerservice@railway.gov.bd	Customer Service	t	\N	2025-07-09 00:45:16.760782
15	inventory_manager	inventory_hash_012	inventory@railway.gov.bd	Inventory Manager	t	\N	2025-07-09 00:45:16.760782
16	safety_officer	safety_hash_013	safety@railway.gov.bd	Safety Officer	t	\N	2025-07-09 00:45:16.760782
17	procurement_officer	procurement_hash_014	procurement@railway.gov.bd	Procurement Officer	t	\N	2025-07-09 00:45:16.760782
18	training_coordinator	training_hash_015	training@railway.gov.bd	Training Coordinator	t	\N	2025-07-09 00:45:16.760782
19	communications_head	comm_hash_016	communications@railway.gov.bd	Communications Head	t	\N	2025-07-09 00:45:16.760782
20	legal_advisor	legal_hash_017	legal@railway.gov.bd	Legal Advisor	t	\N	2025-07-09 00:45:16.760782
21	technical_officer	tech_hash_018	technical@railway.gov.bd	Technical Officer	t	\N	2025-07-09 00:45:16.760782
22	quality_assurance	qa_hash_019	qa@railway.gov.bd	Quality Assurance	t	\N	2025-07-09 00:45:16.760782
23	project_manager	project_hash_020	project@railway.gov.bd	Project Manager	t	\N	2025-07-09 00:45:16.760782
\.


--
-- TOC entry 5128 (class 0 OID 41833)
-- Dependencies: 219
-- Data for Name: booking; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.booking (booking_id, passenger_id, booking_date, payment_id, cancellation_reason) FROM stdin;
1	61	2025-06-23 11:42:14.348511	1	\N
2	62	2025-06-23 11:42:14.348511	2	\N
3	63	2025-06-23 11:42:14.348511	3	\N
4	64	2025-06-23 11:42:14.348511	4	\N
5	65	2025-06-23 11:42:14.348511	5	\N
10	61	2025-06-23 14:04:25.543494	14	\N
9	62	2025-06-23 13:13:26.012814	13	Jor
11	62	2025-07-09 10:00:49.964062	15	jor
6	62	2025-06-23 13:11:47.787254	10	nOOO
12	62	2025-07-09 10:36:57.021515	16	iol
13	62	2025-07-09 12:18:42.832831	17	kik
15	62	2025-07-09 12:21:40.517925	19	kiki
16	75	2025-07-09 12:23:25.647591	20	\N
17	62	2025-07-09 12:24:33.62756	21	Tour cancelled
18	62	2025-07-09 14:45:40.781331	22	Tour cancelled
19	62	2025-07-09 15:31:44.51186	23	Tour Cancelled
20	62	2025-07-29 05:48:08.092425	24	\N
\.


--
-- TOC entry 5130 (class 0 OID 41840)
-- Dependencies: 221
-- Data for Name: class; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.class (class_id, class_type) FROM stdin;
49	Shovan
50	S_Chair
51	F_Chair
52	F_Berth
53	S_Berth
54	AC_Chair
55	AC_Berth
56	Snigdha
57	AC_S_Chair
58	AC_F_Chair
59	Sleeper_Class
60	General_Class
61	Ladies_Coach
62	Disabled_Coach
63	Dining_Car
64	Luggage_Van
65	Mail_Van
66	Generator_Van
67	Inspection_Car
68	Saloon_Car
69	Executive_Class
70	Business_Class
71	Tourist_Class
72	Economy_Plus
73	Premium_Economy
74	Standard_Plus
75	Comfort_Class
76	Express_Class
\.


--
-- TOC entry 5132 (class 0 OID 41844)
-- Dependencies: 223
-- Data for Name: coach; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.coach (coach_id, coach_number, class_id) FROM stdin;
49	A	50
50	B	51
51	C	52
52	D	53
53	E	49
54	F	54
55	G	55
56	H	56
57	I	57
58	J	58
59	K	59
60	L	60
61	M	61
62	N	62
63	O	63
64	P	64
65	Q	65
66	R	66
67	S	67
68	T	68
69	U	69
70	V	70
71	W	71
72	X	72
73	Y	73
74	Z	74
75	AA	75
76	AB	76
\.


--
-- TOC entry 5134 (class 0 OID 41848)
-- Dependencies: 225
-- Data for Name: discount; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.discount (discount_id, code, discount_percentage, booking_id, passenger_id, used_at) FROM stdin;
1	STUDENT10	10.00	1	61	\N
2	SENIOR15	15.00	2	62	\N
3	NEWUSER5	5.00	3	63	\N
\.


--
-- TOC entry 5136 (class 0 OID 41852)
-- Dependencies: 227
-- Data for Name: discount_info; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.discount_info (discount_id, processed_by, is_active, start_date, end_date) FROM stdin;
1	1	t	2025-01-01	2025-12-31
2	1	t	2025-01-01	2025-12-31
3	2	t	2025-06-01	2025-06-30
\.


--
-- TOC entry 5137 (class 0 OID 41856)
-- Dependencies: 228
-- Data for Name: fare; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.fare (fare_id, per_km_fare, class_id) FROM stdin;
1	0.50	49
2	0.75	50
3	1.00	51
4	1.25	53
5	1.50	52
6	1.75	56
7	2.00	54
8	2.50	55
9	2.25	57
10	2.75	58
11	1.80	59
12	0.40	60
13	0.60	61
14	0.35	62
15	3.00	63
16	0.25	64
17	0.30	65
18	0.20	66
19	5.00	67
20	10.00	68
21	3.50	69
22	4.00	70
23	1.60	71
24	0.80	72
25	1.20	73
26	0.90	74
27	2.10	75
28	1.40	76
\.


--
-- TOC entry 5139 (class 0 OID 41860)
-- Dependencies: 230
-- Data for Name: feedback; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.feedback (feedback_id, passenger_id, ticket_id, subject, message, status, created_at) FROM stdin;
1	61	1	Excellent Service	The AC coach was very comfortable and staff was helpful. Thank you!	Reviewed	2025-06-23 11:42:14.348511
2	62	2	Delay Issue	Train was delayed by 30 minutes without proper announcement.	Pending	2025-06-23 11:42:14.348511
3	63	3	Clean Toilets	Toilets were clean and well-maintained throughout the journey.	Reviewed	2025-06-23 11:42:14.348511
\.


--
-- TOC entry 5141 (class 0 OID 41868)
-- Dependencies: 232
-- Data for Name: login_history; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.login_history (login_id, passenger_id, login_time, ip_address, device_info, is_success) FROM stdin;
1	61	2025-06-23 11:42:14.348511	192.168.1.100	Mozilla/5.0 Chrome/91.0	f
2	61	2025-06-23 11:42:14.348511	192.168.1.100	Mozilla/5.0 Chrome/91.0	t
3	62	2025-06-23 11:42:14.348511	192.168.1.101	Mozilla/5.0 Firefox/89.0	t
4	63	2025-06-23 11:42:14.348511	192.168.1.102	Mozilla/5.0 Safari/14.0	t
5	62	2025-07-09 12:42:02.514895	::1	Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36	t
6	62	2025-07-09 12:54:00.292273	::1	Chrome on Windows	t
7	62	2025-07-09 13:02:47.90127	::1	Chrome on Windows	t
8	62	2025-07-09 13:06:06.364381	::1	Chrome on Windows	t
9	62	2025-07-09 13:10:32.059413	::1	Chrome on Windows	t
10	62	2025-07-09 13:16:21.956867	::1	Chrome on Windows	t
11	62	2025-07-09 13:18:02.510488	::1	Chrome on Windows	t
12	62	2025-07-09 14:19:01.298952	::1	Chrome on Windows	f
13	62	2025-07-09 14:19:05.761886	::1	Chrome on Windows	t
14	62	2025-07-09 14:29:31.504534	::1	Chrome on Windows	t
15	62	2025-07-09 14:38:51.990032	::1	Chrome on Windows	t
16	62	2025-07-09 14:45:08.095793	::1	Chrome on Windows	t
17	62	2025-07-09 14:52:10.637878	::1	Chrome on Windows	t
18	62	2025-07-09 14:56:17.349926	::1	Chrome on Windows	t
19	62	2025-07-09 15:14:22.056707	::1	Chrome on Windows	t
20	62	2025-07-09 15:24:25.01924	::1	Chrome on Windows	t
21	62	2025-07-09 15:34:22.16895	::1	Chrome on Windows	t
22	62	2025-07-09 15:48:54.519872	::1	Chrome on Windows	t
23	62	2025-07-09 19:01:41.904468	::1	Chrome on Windows	t
24	62	2025-07-13 00:13:13.900434	::1	Chrome on Windows	t
25	62	2025-07-13 00:14:37.12939	::1	Chrome on Windows	t
26	62	2025-07-13 22:28:44.567775	::1	Chrome on Windows	t
27	62	2025-07-13 23:07:32.153977	::1	Chrome on Windows	t
28	62	2025-07-15 21:33:45.940418	::1	Chrome on Windows	t
29	62	2025-07-15 21:45:04.98079	::1	Chrome on Windows	t
30	62	2025-07-15 22:04:34.291227	::1	Chrome on Windows	t
31	62	2025-07-15 22:18:59.635364	::1	Chrome on Windows	t
32	62	2025-07-15 22:21:00.59646	::1	Chrome on Windows	t
33	62	2025-07-15 22:22:14.097951	::1	Chrome on Windows	t
34	62	2025-07-15 22:36:59.311117	::1	Chrome on Windows	t
35	62	2025-07-15 22:48:16.480502	::1	Chrome on Windows	t
36	62	2025-07-16 00:17:42.203934	::1	Chrome on Windows	t
37	62	2025-07-16 00:36:50.390385	::1	Chrome on Windows	t
38	62	2025-07-16 00:43:09.741639	::1	Chrome on Windows	t
39	62	2025-07-16 00:50:42.363189	::1	Chrome on Windows	t
40	62	2025-07-16 00:58:01.020999	::1	Chrome on Windows	t
41	62	2025-07-16 01:06:07.491179	::1	Chrome on Windows	t
42	62	2025-07-16 01:22:48.214945	::1	Chrome on Windows	t
43	62	2025-07-26 08:11:36.245433	::1	Chrome on Windows	t
44	61	2025-07-26 08:14:32.834875	::1	Chrome on Windows	t
45	62	2025-07-29 05:45:02.126574	::1	Chrome on Windows	t
46	62	2025-07-29 05:46:29.820202	::1	Chrome on Windows	t
47	62	2025-07-29 06:24:36.968301	::1	Chrome on Windows	t
48	62	2025-07-29 06:42:48.98964	::1	Chrome on Windows	t
49	62	2025-07-29 06:56:08.116692	::1	Chrome on Windows	t
50	62	2025-07-29 07:11:51.154326	::1	Chrome on Windows	t
51	62	2025-07-29 07:22:26.735165	::1	Chrome on Windows	t
52	62	2025-07-29 07:41:05.09663	::1	Chrome on Windows	t
53	62	2025-07-29 07:42:48.067549	::1	Chrome on Windows	t
54	62	2025-07-29 08:34:00.200237	::1	Chrome on Windows	t
55	62	2025-07-29 08:46:36.257279	::1	Chrome on Windows	t
56	62	2025-07-29 18:19:05.811	::1	Chrome on Windows	t
57	62	2025-07-29 18:57:17.615135	::1	Chrome on Windows	t
58	62	2025-07-29 19:01:35.045917	::1	Chrome on Windows	t
59	62	2025-07-29 19:05:09.738892	::1	Chrome on Windows	t
60	62	2025-07-29 19:24:15.991063	::1	Chrome on Windows	t
61	62	2025-07-29 19:30:37.240741	::1	Chrome on Windows	t
62	62	2025-07-29 19:34:38.074976	::1	Chrome on Windows	t
63	62	2025-07-29 19:39:59.56421	::1	Chrome on Windows	t
64	62	2025-07-29 19:53:42.286401	::1	Chrome on Windows	t
65	62	2025-07-29 20:00:51.134989	::1	Chrome on Windows	t
\.


--
-- TOC entry 5143 (class 0 OID 41873)
-- Dependencies: 234
-- Data for Name: notification; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.notification (notification_id, status, created_at) FROM stdin;
1	Read	2025-06-23 11:42:14.348511
3	Read	2025-06-23 11:42:14.348511
2	Read	2025-06-23 11:42:14.348511
\.


--
-- TOC entry 5144 (class 0 OID 41878)
-- Dependencies: 235
-- Data for Name: notification_info; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.notification_info (passenger_id, notification_id, message, type) FROM stdin;
61	1	Your ticket for Suborno Express has been confirmed. Train departs at 07:00 AM from Dhaka Kamalapur.	BOOKING_CONFIRMATION
62	2	Your train Turna Nishitha is running 15 minutes late. New departure time: 15:45.	DELAY_ALERT
63	3	Thank you for choosing Bangladesh Railway. Rate your travel experience.	FEEDBACK_REQUEST
\.


--
-- TOC entry 5146 (class 0 OID 41884)
-- Dependencies: 237
-- Data for Name: passenger; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.passenger (passenger_id, name, email, phone_number, address, created_at, password_hash) FROM stdin;
64	Nasir Uddin	nasir@gmail.com	+880161234570	House 25, Agrabad, Chittagong	2025-06-23 11:42:14.348511	\N
65	Rashida Begum	rashida@gmail.com	+880151234571	Kazir Dewri, Chittagong	2025-06-23 11:42:14.348511	\N
66	Mohammad Ali	ali@yahoo.com	+880141234572	Station Road, Sylhet	2025-06-23 11:42:14.348511	\N
67	Salma Akter	salma@gmail.com	+880131234573	Zindabazar, Sylhet	2025-06-23 11:42:14.348511	\N
68	Habibur Rahman	habib@hotmail.com	+880121234574	Court Para, Kushtia	2025-06-23 11:42:14.348511	\N
69	Amina Khatun	amina@gmail.com	+880111234575	Shaheb Bazar, Rajshahi	2025-06-23 11:42:14.348511	\N
70	Mizanur Rahman	mizan@yahoo.com	+880101234576	New Market Area, Rangpur	2025-06-23 11:42:14.348511	\N
61	Md. Rahman Ahmed	rahman@gmail.com	+880171234567	House 12, Road 5, Dhanmondi, Dhaka	2025-06-23 11:42:14.348511	hash123
62	Fatima Khatun	fatima@yahoo.com	+880181234568	Flat B-3, Uttara Sector 7, Dhaka	2025-06-23 11:42:14.348511	password456
63	Abdul Karim	karim@hotmail.com	+880191234569	Village Goalpar, Comilla	2025-06-23 11:42:14.348511	secure789
71	Ahmed Hassan	ahmed.hassan@gmail.com	+880171234580	House 45, Gulshan-1, Dhaka	2025-07-09 00:45:16.760782	hash001
72	Fatima Rahman	fatima.rahman@yahoo.com	+880181234581	Road 12, Banani, Dhaka	2025-07-09 00:45:16.760782	hash002
73	Mohammad Karim	m.karim@hotmail.com	+880191234582	Wari, Old Dhaka	2025-07-09 00:45:16.760782	hash003
74	Rashida Sultana	rashida.sultana@gmail.com	+880161234583	Pallabi, Dhaka	2025-07-09 00:45:16.760782	hash004
75	Abdul Latif	a.latif@yahoo.com	+880151234584	Mohammadpur, Dhaka	2025-07-09 00:45:16.760782	hash005
76	Salma Khatun	salma.khatun@gmail.com	+880141234585	Rampura, Dhaka	2025-07-09 00:45:16.760782	hash006
77	Rafique Ahmed	rafique.ahmed@hotmail.com	+880131234586	Badda, Dhaka	2025-07-09 00:45:16.760782	hash007
78	Nasreen Akhter	nasreen.akhter@gmail.com	+880121234587	Tejgaon, Dhaka	2025-07-09 00:45:16.760782	hash008
79	Shahidul Islam	shahidul.islam@yahoo.com	+880111234588	Farmgate, Dhaka	2025-07-09 00:45:16.760782	hash009
80	Rokeya Begum	rokeya.begum@gmail.com	+880101234589	New Market, Dhaka	2025-07-09 00:45:16.760782	hash010
81	Mizanur Rahman Jr.	mizanur.rahman@hotmail.com	+880181234590	Elephant Road, Dhaka	2025-07-09 00:45:16.760782	hash011
82	Sultana Parvin	sultana.parvin@gmail.com	+880171234591	Lalmatia, Dhaka	2025-07-09 00:45:16.760782	hash012
83	Habibur Rahman Jr.	habibur.rahman@yahoo.com	+880191234592	Shyamoli, Dhaka	2025-07-09 00:45:16.760782	hash013
84	Rashida Khatun	rashida.khatun@gmail.com	+880161234593	Mirpur-1, Dhaka	2025-07-09 00:45:16.760782	hash014
85	Aminul Islam	aminul.islam@hotmail.com	+880151234594	Kazipara, Dhaka	2025-07-09 00:45:16.760782	hash015
86	Fatema Begum	fatema.begum@gmail.com	+880141234595	Agargaon, Dhaka	2025-07-09 00:45:16.760782	hash016
87	Shahjahan Ali	shahjahan.ali@yahoo.com	+880131234596	Kalabagan, Dhaka	2025-07-09 00:45:16.760782	hash017
88	Mahmuda Akhter	mahmuda.akhter@gmail.com	+880121234597	Green Road, Dhaka	2025-07-09 00:45:16.760782	hash018
89	Delwar Hossain	delwar.hossain@hotmail.com	+880111234598	Panthapath, Dhaka	2025-07-09 00:45:16.760782	hash019
90	Rahela Khatun	rahela.khatun@gmail.com	+880101234599	Indira Road, Dhaka	2025-07-09 00:45:16.760782	hash020
\.


--
-- TOC entry 5148 (class 0 OID 41891)
-- Dependencies: 239
-- Data for Name: payment; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.payment (payment_id, amount, payment_date, transaction_id, payment_status) FROM stdin;
1	640.00	2025-06-23 11:42:14.348511	TXN001	Completed
3	491.50	2025-06-23 11:42:14.348511	TXN003	Completed
4	192.19	2025-06-23 11:42:14.348511	TXN004	Completed
5	90.34	2025-06-23 11:42:14.348511	TXN005	Completed
10	641.00	2025-06-23 13:11:47.787254	TXN-1750662707793-62	Completed
2	320.00	2025-06-23 11:42:14.348511	TXN002	Refunded
13	320.50	2025-06-23 13:13:26.012814	TXN-1750662806014-62	Completed
14	641.00	2025-06-23 14:04:25.543494	TXN-1750665865552-61	Completed
15	641.00	2025-07-09 10:00:49.964062	TXN-1752033649960-62	Completed
16	641.00	2025-07-09 10:36:57.021515	TXN-1752035817022-62	Completed
17	641.00	2025-07-09 12:18:42.832831	TXN-1752041922836-62	Completed
19	641.00	2025-07-09 12:21:40.517925	TXN-1752042100527-62	Completed
20	641.00	2025-07-09 12:23:25.647591	TXN-1752042205648-75	Completed
21	560.88	2025-07-09 12:24:33.62756	TXN-1752042273628-62	Completed
22	641.00	2025-07-09 14:45:40.781331	TXN-1752050740782-62	Completed
23	641.00	2025-07-09 15:31:44.51186	TXN-1752053504519-62	Completed
24	641.00	2025-07-29 05:48:08.092425	TXN-1753746488104-62	Completed
\.


--
-- TOC entry 5150 (class 0 OID 41897)
-- Dependencies: 241
-- Data for Name: route; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.route (route_id, source_station_id, destination_station_id, distance, duration, created_at) FROM stdin;
31	73	74	320.50	420	2025-06-23 11:42:14.348511
32	73	75	245.75	300	2025-06-23 11:42:14.348511
33	73	76	256.25	360	2025-06-23 11:42:14.348511
34	73	77	460.80	540	2025-06-23 11:42:14.348511
35	73	78	194.30	240	2025-06-23 11:42:14.348511
36	73	79	120.45	150	2025-06-23 11:42:14.348511
37	74	75	180.20	240	2025-06-23 11:42:14.348511
38	76	77	204.60	180	2025-06-23 11:42:14.348511
39	73	80	125.75	165	2025-06-23 11:42:14.348511
40	73	81	165.90	195	2025-06-23 11:42:14.348511
41	85	86	15.50	25	2025-07-09 00:45:16.760782
42	86	87	25.75	40	2025-07-09 00:45:16.760782
43	87	88	45.20	60	2025-07-09 00:45:16.760782
44	88	89	35.60	50	2025-07-09 00:45:16.760782
45	89	90	28.40	45	2025-07-09 00:45:16.760782
46	90	91	42.80	65	2025-07-09 00:45:16.760782
47	91	92	38.90	55	2025-07-09 00:45:16.760782
48	92	93	52.30	75	2025-07-09 00:45:16.760782
49	93	94	29.70	48	2025-07-09 00:45:16.760782
50	94	95	33.20	52	2025-07-09 00:45:16.760782
51	95	96	41.60	62	2025-07-09 00:45:16.760782
52	96	97	36.40	58	2025-07-09 00:45:16.760782
53	97	98	48.80	72	2025-07-09 00:45:16.760782
54	98	99	31.90	49	2025-07-09 00:45:16.760782
55	99	100	44.70	67	2025-07-09 00:45:16.760782
56	100	101	39.30	59	2025-07-09 00:45:16.760782
57	101	102	46.20	69	2025-07-09 00:45:16.760782
58	102	103	34.80	54	2025-07-09 00:45:16.760782
59	103	104	37.50	57	2025-07-09 00:45:16.760782
60	85	104	672.45	1080	2025-07-09 00:45:16.760782
\.


--
-- TOC entry 5152 (class 0 OID 41902)
-- Dependencies: 243
-- Data for Name: route_station; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.route_station (route_station_id, route_id, station_id, arrival_time, departure_time) FROM stdin;
1	31	80	09:15:00	09:20:00
2	32	79	01:30:00	01:35:00
3	33	78	09:45:00	09:50:00
\.


--
-- TOC entry 5154 (class 0 OID 41906)
-- Dependencies: 245
-- Data for Name: schedule; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.schedule (schedule_id, train_id, route_id, departure_time, arrival_time, departure_date, status, created_at) FROM stdin;
1	49	31	07:00:00	14:00:00	2025-07-16	On Time	2025-06-23 11:42:14.348511
2	50	31	15:30:00	22:30:00	2025-07-17	On Time	2025-06-23 11:42:14.348511
3	51	32	22:30:00	05:30:00	2025-07-18	On Time	2025-06-23 11:42:14.348511
4	52	33	06:45:00	12:45:00	2025-07-19	On Time	2025-06-23 11:42:14.348511
5	53	34	21:00:00	06:00:00	2025-07-20	On Time	2025-06-23 11:42:14.348511
6	54	35	23:15:00	03:15:00	2025-07-21	On Time	2025-06-23 11:42:14.348511
7	55	31	08:30:00	15:30:00	2025-07-22	On Time	2025-06-23 11:42:14.348511
8	56	36	16:20:00	18:50:00	2025-07-23	On Time	2025-06-23 11:42:14.348511
9	57	41	06:00:00	06:25:00	2025-07-24	On Time	2025-07-09 00:45:16.760782
10	58	42	06:30:00	07:10:00	2025-07-25	On Time	2025-07-09 00:45:16.760782
11	59	43	07:15:00	08:15:00	2025-07-26	On Time	2025-07-09 00:45:16.760782
12	60	44	08:20:00	09:10:00	2025-07-27	On Time	2025-07-09 00:45:16.760782
13	61	45	09:15:00	10:00:00	2025-07-28	On Time	2025-07-09 00:45:16.760782
14	62	46	10:05:00	11:10:00	2025-07-29	On Time	2025-07-09 00:45:16.760782
15	63	47	11:15:00	12:10:00	2025-07-30	On Time	2025-07-09 00:45:16.760782
16	64	48	12:15:00	13:30:00	2025-07-31	On Time	2025-07-09 00:45:16.760782
17	65	49	13:35:00	14:23:00	2025-08-01	On Time	2025-07-09 00:45:16.760782
18	66	50	14:30:00	15:22:00	2025-08-02	On Time	2025-07-09 00:45:16.760782
19	67	51	15:30:00	16:32:00	2025-08-03	On Time	2025-07-09 00:45:16.760782
20	68	52	16:40:00	17:38:00	2025-08-04	On Time	2025-07-09 00:45:16.760782
21	69	53	17:45:00	18:57:00	2025-08-05	On Time	2025-07-09 00:45:16.760782
22	70	54	19:00:00	19:49:00	2025-08-06	On Time	2025-07-09 00:45:16.760782
23	71	55	20:00:00	21:07:00	2025-08-07	On Time	2025-07-09 00:45:16.760782
24	72	56	21:15:00	22:14:00	2025-08-08	On Time	2025-07-09 00:45:16.760782
25	73	57	22:20:00	23:29:00	2025-08-09	On Time	2025-07-09 00:45:16.760782
26	74	58	23:35:00	00:29:00	2025-08-10	On Time	2025-07-09 00:45:16.760782
27	75	59	00:35:00	01:32:00	2025-08-11	On Time	2025-07-09 00:45:16.760782
28	76	60	01:40:00	19:40:00	2025-08-12	On Time	2025-07-09 00:45:16.760782
29	77	33	14:00:00	20:00:00	2025-08-13	On Time	2025-07-09 00:45:16.760782
30	78	33	14:00:00	20:00:00	2025-08-14	On Time	2025-07-09 00:45:16.760782
31	55	31	16:00:00	23:00:00	2025-08-15	On Time	2025-07-09 00:45:16.760782
32	79	31	07:00:00	14:00:00	2025-08-16	On Time	2025-07-09 01:23:41.179655
33	49	31	02:01:00	15:06:00	2025-07-30	On Time	2025-07-29 05:46:04.002701
34	80	31	14:10:00	02:02:00	2025-07-30	On Time	2025-07-29 05:59:28.2642
\.


--
-- TOC entry 5156 (class 0 OID 41912)
-- Dependencies: 247
-- Data for Name: seat_inventory; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.seat_inventory (inventory_id, schedule_id, seat_number, is_available, row_number, column_number, coach_id) FROM stdin;
1	1	A1	f	1	1	54
2	1	A2	f	1	2	54
3	1	B1	t	1	3	54
4	1	B2	t	1	4	54
5	1	A3	f	2	1	54
6	1	A4	f	2	2	54
7	1	B3	t	2	3	54
8	1	B4	t	2	4	54
9	1	A5	f	3	1	54
10	1	A6	t	3	2	54
11	1	B5	f	3	3	54
12	1	B6	t	3	4	54
13	1	A7	t	4	1	54
14	1	A8	t	4	2	54
15	1	B7	t	4	3	54
16	1	B8	t	4	4	54
17	2	F1	t	1	1	50
18	2	F2	t	1	2	50
19	2	F3	t	1	3	50
20	2	F4	f	1	4	50
21	2	F5	t	2	1	50
22	2	F6	t	2	2	50
23	2	F7	t	2	3	50
24	2	F8	t	2	4	50
25	2	F9	t	3	1	50
26	2	F10	f	3	2	50
27	2	F11	t	3	3	50
28	2	F12	t	3	4	50
29	9	M1	t	1	1	57
30	9	M2	t	1	2	57
31	10	C1	t	1	1	58
32	10	C2	t	1	2	58
33	11	S1	t	1	1	59
34	11	S2	t	1	2	59
35	12	G1	t	1	1	60
36	12	G2	t	1	2	60
37	13	L1	t	1	1	61
38	13	L2	t	1	2	61
39	14	D1	t	1	1	63
40	15	DN1	t	1	1	64
41	16	LG1	t	1	1	65
42	17	ML1	t	1	1	66
43	18	GN1	t	1	1	67
44	19	IN1	t	1	1	68
45	20	SL1	t	1	1	69
46	21	EX1	t	1	1	70
47	22	BS1	t	1	1	71
48	23	TR1	t	1	1	72
49	24	EP1	t	1	1	73
50	25	PE1	t	1	1	74
51	26	SP1	t	1	1	75
52	27	CF1	t	1	1	76
53	28	ER1	t	1	1	57
54	29	KA-1	t	1	1	53
55	29	KA-2	t	1	2	53
56	29	KA-3	t	1	3	53
57	29	KA-4	t	1	4	53
58	29	KHA-1	t	2	1	53
59	29	KHA-2	t	2	2	53
60	29	KHA-3	t	2	3	53
61	29	KHA-4	t	2	4	53
62	29	GA-1	t	3	1	53
63	29	GA-2	t	3	2	53
64	29	GA-3	t	3	3	53
65	29	GA-4	t	3	4	53
66	30	A-1	t	1	1	49
67	30	A-2	t	1	2	49
68	30	A-3	t	1	3	49
69	30	A-4	t	1	4	49
70	30	B-1	t	2	1	49
71	30	B-2	t	2	2	49
72	30	B-3	t	2	3	49
73	30	B-4	t	2	4	49
74	30	C-1	t	3	1	49
75	30	C-2	t	3	2	49
76	30	C-3	t	3	3	49
77	30	C-4	t	3	4	49
78	31	SNG-1	t	1	1	56
79	31	SNG-2	t	1	2	56
80	31	SNG-3	t	1	3	56
81	31	SNG-4	t	1	4	56
82	31	SNG-5	t	2	1	56
83	31	SNG-6	t	2	2	56
84	31	SNG-7	t	2	3	56
85	31	SNG-8	t	2	4	56
86	31	SNG-9	t	3	1	56
87	31	SNG-10	t	3	2	56
88	31	SNG-11	t	3	3	56
89	31	SNG-12	t	3	4	56
90	32	SNG-A1	t	1	1	56
91	32	SNG-A2	t	1	2	56
92	32	SNG-A3	t	1	3	56
93	32	SNG-B1	t	1	4	56
94	32	SNG-B2	t	2	1	56
95	32	SNG-B3	t	2	2	56
96	32	SNG-C1	t	2	3	56
97	32	SNG-C2	t	2	4	56
98	32	SNG-D1	t	3	1	56
99	32	SNG-D2	t	3	2	56
101	33	A2	t	1	2	54
102	33	A3	t	1	3	54
103	33	A4	t	1	4	54
104	33	B1	t	2	1	54
105	33	B2	t	2	2	54
106	33	B3	t	2	3	54
107	33	B4	t	2	4	54
108	33	C1	t	3	1	54
109	33	C2	t	3	2	54
110	33	C3	t	3	3	54
111	33	C4	t	3	4	54
112	33	D1	t	4	1	54
113	33	D2	t	4	2	54
114	33	D3	t	4	3	54
115	33	D4	t	4	4	54
116	33	E1	t	5	1	54
117	33	E2	t	5	2	54
118	33	E3	t	5	3	54
119	33	E4	t	5	4	54
120	33	F1	t	6	1	54
121	33	F2	t	6	2	54
122	33	F3	t	6	3	54
123	33	F4	t	6	4	54
124	33	G1	t	7	1	54
125	33	G2	t	7	2	54
126	33	G3	t	7	3	54
127	33	G4	t	7	4	54
128	33	H1	t	8	1	54
129	33	H2	t	8	2	54
130	33	H3	t	8	3	54
131	33	H4	t	8	4	54
132	33	I1	t	9	1	54
133	33	I2	t	9	2	54
134	33	I3	t	9	3	54
135	33	I4	t	9	4	54
136	33	J1	t	10	1	54
137	33	J2	t	10	2	54
138	33	J3	t	10	3	54
139	33	J4	t	10	4	54
140	33	K1	t	11	1	54
141	33	K2	t	11	2	54
142	33	K3	t	11	3	54
143	33	K4	t	11	4	54
144	33	L1	t	12	1	54
145	33	L2	t	12	2	54
146	33	L3	t	12	3	54
147	33	L4	t	12	4	54
148	33	M1	t	13	1	54
149	33	M2	t	13	2	54
150	33	M3	t	13	3	54
151	33	M4	t	13	4	54
152	33	N1	t	14	1	54
153	33	N2	t	14	2	54
154	33	N3	t	14	3	54
155	33	N4	t	14	4	54
156	33	O1	t	15	1	54
157	33	O2	t	15	2	54
158	33	O3	t	15	3	54
159	33	O4	t	15	4	54
160	33	P1	t	16	1	54
161	33	P2	t	16	2	54
162	33	P3	t	16	3	54
163	33	P4	t	16	4	54
164	33	Q1	t	17	1	54
165	33	Q2	t	17	2	54
166	33	Q3	t	17	3	54
167	33	Q4	t	17	4	54
168	33	R1	t	18	1	54
169	33	R2	t	18	2	54
170	33	R3	t	18	3	54
171	33	R4	t	18	4	54
172	33	S1	t	19	1	54
173	33	S2	t	19	2	54
174	33	S3	t	19	3	54
175	33	S4	t	19	4	54
100	33	A1	f	1	1	54
176	33	Z1	t	1	1	49
177	33	Z2	t	1	1	49
178	34	A1	t	1	1	49
179	34	A2	t	1	2	49
180	34	A3	t	1	3	49
181	34	A4	t	1	4	49
182	34	B1	t	2	1	49
183	34	B2	t	2	2	49
184	34	B3	t	2	3	49
185	34	B4	t	2	4	49
186	34	C1	t	3	1	49
187	34	C2	t	3	2	49
188	34	C3	t	3	3	49
189	34	C4	t	3	4	49
190	34	D1	t	4	1	49
191	34	D2	t	4	2	49
192	34	D3	t	4	3	49
193	34	D4	t	4	4	49
194	34	E1	t	5	1	49
195	34	E2	t	5	2	49
196	34	E3	t	5	3	49
197	34	E4	t	5	4	49
198	34	F1	t	6	1	49
199	34	F2	t	6	2	49
200	34	F3	t	6	3	49
201	34	F4	t	6	4	49
202	34	G1	t	7	1	49
203	34	G2	t	7	2	49
204	34	G3	t	7	3	49
205	34	G4	t	7	4	49
206	34	H1	t	8	1	49
207	34	H2	t	8	2	49
208	34	H3	t	8	3	49
209	34	H4	t	8	4	49
210	34	I1	t	9	1	49
211	34	I2	t	9	2	49
212	34	I3	t	9	3	49
213	34	I4	t	9	4	49
214	34	J1	t	10	1	49
215	34	J2	t	10	2	49
216	34	J3	t	10	3	49
217	34	J4	t	10	4	49
218	34	K5	t	1	1	52
\.


--
-- TOC entry 5158 (class 0 OID 41917)
-- Dependencies: 249
-- Data for Name: station; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.station (station_id, station_name, location, contact_info, created_at) FROM stdin;
73	Dhaka Kamalapur	Kamalapur, Dhaka	+880-2-8315915	2025-06-23 11:42:14.348511
74	Chittagong Railway Station	Railway Colony, Chittagong	+880-31-610012	2025-06-23 11:42:14.348511
75	Sylhet Railway Station	Railway Colony, Sylhet	+880-821-710345	2025-06-23 11:42:14.348511
76	Rajshahi Railway Station	Court Station, Rajshahi	+880-721-772889	2025-06-23 11:42:14.348511
77	Rangpur Railway Station	Station Road, Rangpur	+880-521-63456	2025-06-23 11:42:14.348511
78	Kushtia Railway Station	Station Road, Kushtia	+880-71-61234	2025-06-23 11:42:14.348511
79	Mymensingh Railway Station	Town Hall Road, Mymensingh	+880-91-55678	2025-06-23 11:42:14.348511
80	Comilla Cantonment	Cantonment, Comilla	+880-81-76543	2025-06-23 11:42:14.348511
81	Jessore Railway Station	Station Road, Jessore	+880-421-68901	2025-06-23 11:42:14.348511
82	Bogura Railway Station	Station Para, Bogura	+880-51-67890	2025-06-23 11:42:14.348511
83	Dinajpur Railway Station	Station Road, Dinajpur	+880-531-61234	2025-06-23 11:42:14.348511
84	Parbatipur Junction	Parbatipur, Dinajpur	+880-531-56789	2025-06-23 11:42:14.348511
85	Baridhara Railway Station	Baridhara, Dhaka	+880-2-8834567	2025-07-09 00:45:16.760782
86	Tejgaon Railway Station	Tejgaon, Dhaka	+880-2-9876543	2025-07-09 00:45:16.760782
87	Uttara Railway Station	Uttara, Dhaka	+880-2-8765432	2025-07-09 00:45:16.760782
88	Narayanganj Railway Station	Narayanganj	+880-2-7654321	2025-07-09 00:45:16.760782
89	Tongi Railway Station	Tongi, Gazipur	+880-2-6543210	2025-07-09 00:45:16.760782
90	Brahmanbaria Railway Station	Brahmanbaria	+880-851-56789	2025-07-09 00:45:16.760782
91	Feni Railway Station	Feni	+880-331-65432	2025-07-09 00:45:16.760782
92	Noakhali Railway Station	Noakhali	+880-321-54321	2025-07-09 00:45:16.760782
93	Barisal Railway Station	Barisal	+880-431-43210	2025-07-09 00:45:16.760782
94	Patuakhali Railway Station	Patuakhali	+880-441-32109	2025-07-09 00:45:16.760782
95	Khulna Railway Station	Khulna	+880-41-21098	2025-07-09 00:45:16.760782
96	Satkhira Railway Station	Satkhira	+880-471-10987	2025-07-09 00:45:16.760782
97	Chuadanga Railway Station	Chuadanga	+880-761-09876	2025-07-09 00:45:16.760782
98	Meherpur Railway Station	Meherpur	+880-791-98765	2025-07-09 00:45:16.760782
99	Jhenaidah Railway Station	Jhenaidah	+880-451-87654	2025-07-09 00:45:16.760782
100	Magura Railway Station	Magura	+880-488-76543	2025-07-09 00:45:16.760782
101	Narail Railway Station	Narail	+880-481-65432	2025-07-09 00:45:16.760782
102	Gopalganj Railway Station	Gopalganj	+880-661-54321	2025-07-09 00:45:16.760782
103	Faridpur Railway Station	Faridpur	+880-631-43210	2025-07-09 00:45:16.760782
104	Madaripur Railway Station	Madaripur	+880-641-32109	2025-07-09 00:45:16.760782
\.


--
-- TOC entry 5160 (class 0 OID 41924)
-- Dependencies: 251
-- Data for Name: ticket; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ticket (ticket_id, fare_id, passenger_id, schedule_id, booking_date, seat_number, price, status, payment_id) FROM stdin;
1	7	61	1	2025-06-23 11:42:14.348511	A4	640.00	Booked	1
2	7	63	1	2025-06-23 11:42:14.348511	B5	640.00	Booked	3
4	3	64	2	2025-06-23 11:42:14.348511	F10	320.00	Booked	4
3	3	62	2	2025-06-23 11:42:14.348511	F3	320.00	Cancelled	2
9	7	61	1	2025-06-23 14:04:25.543494	A2	641.00	Booked	14
8	3	62	2	2025-06-23 13:13:26.012814	F4	320.50	Cancelled	13
10	7	62	1	2025-07-09 10:00:49.964062	A3	641.00	Cancelled	15
5	7	62	1	2025-06-23 13:11:47.787254	A1	641.00	Cancelled	10
11	7	62	1	2025-07-09 10:36:57.021515	A6	641.00	Cancelled	16
12	7	62	1	2025-07-09 12:18:42.832831	A5	641.00	Cancelled	17
14	7	62	1	2025-07-09 12:21:40.517925	A5	641.00	Cancelled	19
15	7	75	1	2025-07-09 12:23:25.647591	A5	641.00	Booked	20
16	6	62	32	2025-07-09 12:24:33.62756	SNG-B2	560.88	Cancelled	21
17	7	62	1	2025-07-09 14:45:40.781331	A6	641.00	Cancelled	22
18	7	62	1	2025-07-09 15:31:44.51186	A7	641.00	Cancelled	23
19	7	62	33	2025-07-29 05:48:08.092425	A1	641.00	Booked	24
\.


--
-- TOC entry 5161 (class 0 OID 41929)
-- Dependencies: 252
-- Data for Name: ticket_booking; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ticket_booking (ticket_id, booking_id) FROM stdin;
1	1
2	2
3	3
4	4
5	6
8	9
9	10
10	11
11	12
12	13
14	15
15	16
16	17
17	18
18	19
19	20
\.


--
-- TOC entry 5162 (class 0 OID 41932)
-- Dependencies: 253
-- Data for Name: ticket_cancellation; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ticket_cancellation (cancellation_id, ticket_id, cancellation_date, refund_amount, reason, processed_by, status) FROM stdin;
1	3	2025-06-23 13:12:33.497172	256.00	nothing	1	Processed
2	11	2025-07-09 10:37:20.211164	199.47	iol	1	Processed
3	12	2025-07-09 12:19:02.483192	133.47	kik	1	Processed
4	14	2025-07-09 12:21:59.203457	77.03	kiki	1	Processed
5	16	2025-07-09 13:17:09.939916	91.29	Tour cancelled	1	Processed
6	17	2025-07-09 15:32:46.642855	197.02	Tour cancelled	1	Processed
7	18	2025-07-13 23:09:14.10614	197.15	Tour Cancelled	1	Processed
\.


--
-- TOC entry 5165 (class 0 OID 41941)
-- Dependencies: 256
-- Data for Name: train; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.train (train_id, train_name, total_seats, description, created_at) FROM stdin;
49	Suborno Express	76	Premium AC service between Dhaka and Chittagong	2025-06-23 11:42:14.348511
50	Turna Nishitha	85	Fast intercity service Dhaka-Chittagong	2025-06-23 11:42:14.348511
51	Parabat Express	90	Express service Dhaka-Sylhet	2025-06-23 11:42:14.348511
52	Silk City Express	110	Economy service Dhaka-Rajshahi	2025-06-23 11:42:14.348511
53	Rangpur Express	64	Overnight service Dhaka-Rangpur	2025-06-23 11:42:14.348511
54	Kushtia Express	72	Mail train Dhaka-Kushtia	2025-06-23 11:42:14.348511
55	Chittagong Mail	80	Comfortable service Dhaka-Chittagong	2025-06-23 11:42:14.348511
56	Mymensingh Express	88	Regional express Dhaka-Mymensingh	2025-06-23 11:42:14.348511
57	Metro Express	68	Metro AC service within Dhaka	2025-07-09 00:45:16.760782
58	City Commuter	72	Urban commuter service	2025-07-09 00:45:16.760782
59	Night Mail	48	Overnight sleeper service	2025-07-09 00:45:16.760782
60	Local Express	120	Local general service	2025-07-09 00:45:16.760782
61	Ladies Special	80	Ladies only service	2025-07-09 00:45:16.760782
62	Accessible Train	60	Disabled-friendly service	2025-07-09 00:45:16.760782
63	Dining Express	40	Express with dining facilities	2025-07-09 00:45:16.760782
64	Cargo Express	20	Luggage transport service	2025-07-09 00:45:16.760782
65	Mail Runner	30	Mail delivery service	2025-07-09 00:45:16.760782
66	Power Express	25	Service train with generator	2025-07-09 00:45:16.760782
67	Official Special	15	Official inspection service	2025-07-09 00:45:16.760782
68	VIP Service	12	VIP saloon service	2025-07-09 00:45:16.760782
69	Executive Express	50	Executive class service	2025-07-09 00:45:16.760782
70	Business Line	45	Business class service	2025-07-09 00:45:16.760782
71	Tourist Special	90	Tourist special service	2025-07-09 00:45:16.760782
72	Economy Plus	100	Enhanced economy service	2025-07-09 00:45:16.760782
73	Premium Service	75	Premium economy service	2025-07-09 00:45:16.760782
74	Standard Plus	95	Enhanced standard service	2025-07-09 00:45:16.760782
75	Comfort Line	65	Comfort class service	2025-07-09 00:45:16.760782
76	Express Runner	85	Express class service	2025-07-09 00:45:16.760782
77	Padma Express - Shovan	110	Intercity service Dhaka-Rajshahi - Shovan Class	2025-07-09 00:45:16.760782
78	Padma Express - S_Chair	90	Intercity service Dhaka-Rajshahi - S_Chair Class	2025-07-09 00:45:16.760782
79	Suborno Express - Snigdha	80	Premium service between Dhaka and Chittagong - Snigdha Class	2025-07-09 01:23:41.179655
80	nisa express	40	My world	2025-07-29 05:58:52.618234
\.


--
-- TOC entry 5168 (class 0 OID 49224)
-- Dependencies: 259
-- Data for Name: train_coach; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.train_coach (train_coach_id, train_id, coach_id, coach_order) FROM stdin;
\.


--
-- TOC entry 5178 (class 0 OID 0)
-- Dependencies: 218
-- Name: admin_admin_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.admin_admin_id_seq', 23, true);


--
-- TOC entry 5179 (class 0 OID 0)
-- Dependencies: 220
-- Name: booking_booking_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.booking_booking_id_seq', 20, true);


--
-- TOC entry 5180 (class 0 OID 0)
-- Dependencies: 222
-- Name: class_class_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.class_class_id_seq', 76, true);


--
-- TOC entry 5181 (class 0 OID 0)
-- Dependencies: 224
-- Name: coach_coach_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.coach_coach_id_seq', 76, true);


--
-- TOC entry 5182 (class 0 OID 0)
-- Dependencies: 226
-- Name: discount_discount_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.discount_discount_id_seq', 3, true);


--
-- TOC entry 5183 (class 0 OID 0)
-- Dependencies: 229
-- Name: fare_fare_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.fare_fare_id_seq', 28, true);


--
-- TOC entry 5184 (class 0 OID 0)
-- Dependencies: 231
-- Name: feedback_feedback_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.feedback_feedback_id_seq', 3, true);


--
-- TOC entry 5185 (class 0 OID 0)
-- Dependencies: 233
-- Name: login_history_login_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.login_history_login_id_seq', 65, true);


--
-- TOC entry 5186 (class 0 OID 0)
-- Dependencies: 236
-- Name: notification_notification_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.notification_notification_id_seq', 3, true);


--
-- TOC entry 5187 (class 0 OID 0)
-- Dependencies: 238
-- Name: passenger_passenger_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.passenger_passenger_id_seq', 90, true);


--
-- TOC entry 5188 (class 0 OID 0)
-- Dependencies: 240
-- Name: payment_payment_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.payment_payment_id_seq', 24, true);


--
-- TOC entry 5189 (class 0 OID 0)
-- Dependencies: 242
-- Name: route_route_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.route_route_id_seq', 60, true);


--
-- TOC entry 5190 (class 0 OID 0)
-- Dependencies: 244
-- Name: route_station_route_station_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.route_station_route_station_id_seq', 3, true);


--
-- TOC entry 5191 (class 0 OID 0)
-- Dependencies: 246
-- Name: schedule_schedule_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.schedule_schedule_id_seq', 34, true);


--
-- TOC entry 5192 (class 0 OID 0)
-- Dependencies: 248
-- Name: seat_inventory_inventory_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.seat_inventory_inventory_id_seq', 222, true);


--
-- TOC entry 5193 (class 0 OID 0)
-- Dependencies: 250
-- Name: station_station_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.station_station_id_seq', 104, true);


--
-- TOC entry 5194 (class 0 OID 0)
-- Dependencies: 254
-- Name: ticket_cancellation_cancellation_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ticket_cancellation_cancellation_id_seq', 7, true);


--
-- TOC entry 5195 (class 0 OID 0)
-- Dependencies: 255
-- Name: ticket_ticket_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ticket_ticket_id_seq', 19, true);


--
-- TOC entry 5196 (class 0 OID 0)
-- Dependencies: 258
-- Name: train_coach_train_coach_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.train_coach_train_coach_id_seq', 1, false);


--
-- TOC entry 5197 (class 0 OID 0)
-- Dependencies: 257
-- Name: train_train_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.train_train_id_seq', 80, true);


--
-- TOC entry 4875 (class 2606 OID 41949)
-- Name: admin admin_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_email_key UNIQUE (email);


--
-- TOC entry 4877 (class 2606 OID 41951)
-- Name: admin admin_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_pkey PRIMARY KEY (admin_id);


--
-- TOC entry 4879 (class 2606 OID 41953)
-- Name: admin admin_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_username_key UNIQUE (username);


--
-- TOC entry 4881 (class 2606 OID 41955)
-- Name: booking booking_payment_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booking
    ADD CONSTRAINT booking_payment_id_key UNIQUE (payment_id);


--
-- TOC entry 4883 (class 2606 OID 41957)
-- Name: booking booking_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booking
    ADD CONSTRAINT booking_pkey PRIMARY KEY (booking_id);


--
-- TOC entry 4885 (class 2606 OID 41959)
-- Name: class class_class_type_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.class
    ADD CONSTRAINT class_class_type_key UNIQUE (class_type);


--
-- TOC entry 4887 (class 2606 OID 41961)
-- Name: class class_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.class
    ADD CONSTRAINT class_pkey PRIMARY KEY (class_id);


--
-- TOC entry 4889 (class 2606 OID 41963)
-- Name: coach coach_coach_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.coach
    ADD CONSTRAINT coach_coach_number_key UNIQUE (coach_number);


--
-- TOC entry 4891 (class 2606 OID 41965)
-- Name: coach coach_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.coach
    ADD CONSTRAINT coach_pkey PRIMARY KEY (coach_id);


--
-- TOC entry 4893 (class 2606 OID 41967)
-- Name: discount discount_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount
    ADD CONSTRAINT discount_code_key UNIQUE (code);


--
-- TOC entry 4897 (class 2606 OID 41969)
-- Name: discount_info discount_info_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_info
    ADD CONSTRAINT discount_info_pkey PRIMARY KEY (discount_id, processed_by);


--
-- TOC entry 4895 (class 2606 OID 41971)
-- Name: discount discount_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount
    ADD CONSTRAINT discount_pkey PRIMARY KEY (discount_id);


--
-- TOC entry 4900 (class 2606 OID 41973)
-- Name: fare fare_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fare
    ADD CONSTRAINT fare_pkey PRIMARY KEY (fare_id);


--
-- TOC entry 4902 (class 2606 OID 41975)
-- Name: feedback feedback_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_pkey PRIMARY KEY (feedback_id);


--
-- TOC entry 4904 (class 2606 OID 41977)
-- Name: login_history login_history_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.login_history
    ADD CONSTRAINT login_history_pkey PRIMARY KEY (login_id);


--
-- TOC entry 4908 (class 2606 OID 41979)
-- Name: notification_info notification_info_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notification_info
    ADD CONSTRAINT notification_info_pkey PRIMARY KEY (passenger_id, notification_id);


--
-- TOC entry 4906 (class 2606 OID 41981)
-- Name: notification notification_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notification
    ADD CONSTRAINT notification_pkey PRIMARY KEY (notification_id);


--
-- TOC entry 4910 (class 2606 OID 41983)
-- Name: passenger passenger_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.passenger
    ADD CONSTRAINT passenger_email_key UNIQUE (email);


--
-- TOC entry 4912 (class 2606 OID 41985)
-- Name: passenger passenger_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.passenger
    ADD CONSTRAINT passenger_pkey PRIMARY KEY (passenger_id);


--
-- TOC entry 4914 (class 2606 OID 41987)
-- Name: payment payment_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment
    ADD CONSTRAINT payment_pkey PRIMARY KEY (payment_id);


--
-- TOC entry 4916 (class 2606 OID 41989)
-- Name: payment payment_transaction_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.payment
    ADD CONSTRAINT payment_transaction_id_key UNIQUE (transaction_id);


--
-- TOC entry 4918 (class 2606 OID 41991)
-- Name: route route_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route
    ADD CONSTRAINT route_pkey PRIMARY KEY (route_id);


--
-- TOC entry 4921 (class 2606 OID 41993)
-- Name: route_station route_station_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route_station
    ADD CONSTRAINT route_station_pkey PRIMARY KEY (route_station_id);


--
-- TOC entry 4924 (class 2606 OID 41995)
-- Name: schedule schedule_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schedule
    ADD CONSTRAINT schedule_pkey PRIMARY KEY (schedule_id);


--
-- TOC entry 4927 (class 2606 OID 41997)
-- Name: seat_inventory seat_inventory_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.seat_inventory
    ADD CONSTRAINT seat_inventory_pkey PRIMARY KEY (inventory_id);


--
-- TOC entry 4930 (class 2606 OID 41999)
-- Name: station station_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.station
    ADD CONSTRAINT station_pkey PRIMARY KEY (station_id);


--
-- TOC entry 4932 (class 2606 OID 42001)
-- Name: station station_station_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.station
    ADD CONSTRAINT station_station_name_key UNIQUE (station_name);


--
-- TOC entry 4939 (class 2606 OID 42003)
-- Name: ticket_booking ticket_booking_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_booking
    ADD CONSTRAINT ticket_booking_pkey PRIMARY KEY (ticket_id, booking_id);


--
-- TOC entry 4941 (class 2606 OID 42005)
-- Name: ticket_cancellation ticket_cancellation_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_cancellation
    ADD CONSTRAINT ticket_cancellation_pkey PRIMARY KEY (cancellation_id);


--
-- TOC entry 4934 (class 2606 OID 42007)
-- Name: ticket ticket_payment_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_payment_id_key UNIQUE (payment_id);


--
-- TOC entry 4936 (class 2606 OID 42009)
-- Name: ticket ticket_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_pkey PRIMARY KEY (ticket_id);


--
-- TOC entry 4945 (class 2606 OID 49229)
-- Name: train_coach train_coach_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train_coach
    ADD CONSTRAINT train_coach_pkey PRIMARY KEY (train_coach_id);


--
-- TOC entry 4947 (class 2606 OID 49231)
-- Name: train_coach train_coach_train_id_coach_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train_coach
    ADD CONSTRAINT train_coach_train_id_coach_id_key UNIQUE (train_id, coach_id);


--
-- TOC entry 4943 (class 2606 OID 42011)
-- Name: train train_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train
    ADD CONSTRAINT train_pkey PRIMARY KEY (train_id);


--
-- TOC entry 4898 (class 1259 OID 49242)
-- Name: fare_class_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX fare_class_id_idx ON public.fare USING btree (class_id);


--
-- TOC entry 4919 (class 1259 OID 42012)
-- Name: route_source_station_id_destination_station_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX route_source_station_id_destination_station_id_idx ON public.route USING btree (source_station_id, destination_station_id);


--
-- TOC entry 4922 (class 1259 OID 42013)
-- Name: route_station_route_id_station_id_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX route_station_route_id_station_id_idx ON public.route_station USING btree (route_id, station_id);


--
-- TOC entry 4925 (class 1259 OID 42014)
-- Name: schedule_train_id_route_id_departure_date_departure_time_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX schedule_train_id_route_id_departure_date_departure_time_idx ON public.schedule USING btree (train_id, route_id, departure_date, departure_time);


--
-- TOC entry 4928 (class 1259 OID 42015)
-- Name: seat_inventory_schedule_id_seat_number_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX seat_inventory_schedule_id_seat_number_idx ON public.seat_inventory USING btree (schedule_id, seat_number);


--
-- TOC entry 4937 (class 1259 OID 42016)
-- Name: ticket_schedule_id_seat_number_booked_idx; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX ticket_schedule_id_seat_number_booked_idx ON public.ticket USING btree (schedule_id, seat_number) WHERE ((status)::text = 'Booked'::text);


--
-- TOC entry 4980 (class 2620 OID 42017)
-- Name: ticket after_ticket_cancellation; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER after_ticket_cancellation AFTER UPDATE ON public.ticket FOR EACH ROW EXECUTE FUNCTION public.process_ticket_cancellation();


--
-- TOC entry 4948 (class 2606 OID 42018)
-- Name: booking booking_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booking
    ADD CONSTRAINT booking_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4949 (class 2606 OID 42023)
-- Name: booking booking_payment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.booking
    ADD CONSTRAINT booking_payment_id_fkey FOREIGN KEY (payment_id) REFERENCES public.payment(payment_id);


--
-- TOC entry 4951 (class 2606 OID 42028)
-- Name: discount discount_booking_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount
    ADD CONSTRAINT discount_booking_id_fkey FOREIGN KEY (booking_id) REFERENCES public.booking(booking_id);


--
-- TOC entry 4953 (class 2606 OID 42033)
-- Name: discount_info discount_info_discount_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_info
    ADD CONSTRAINT discount_info_discount_id_fkey FOREIGN KEY (discount_id) REFERENCES public.discount(discount_id);


--
-- TOC entry 4954 (class 2606 OID 42038)
-- Name: discount_info discount_info_processed_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount_info
    ADD CONSTRAINT discount_info_processed_by_fkey FOREIGN KEY (processed_by) REFERENCES public.admin(admin_id);


--
-- TOC entry 4952 (class 2606 OID 42043)
-- Name: discount discount_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.discount
    ADD CONSTRAINT discount_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4956 (class 2606 OID 42058)
-- Name: feedback feedback_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4957 (class 2606 OID 42063)
-- Name: feedback feedback_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.feedback
    ADD CONSTRAINT feedback_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- TOC entry 4950 (class 2606 OID 49208)
-- Name: coach fk_coach_class; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.coach
    ADD CONSTRAINT fk_coach_class FOREIGN KEY (class_id) REFERENCES public.class(class_id);


--
-- TOC entry 4955 (class 2606 OID 49213)
-- Name: fare fk_fare_class; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fare
    ADD CONSTRAINT fk_fare_class FOREIGN KEY (class_id) REFERENCES public.class(class_id);


--
-- TOC entry 4967 (class 2606 OID 49218)
-- Name: seat_inventory fk_seat_inventory_coach; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.seat_inventory
    ADD CONSTRAINT fk_seat_inventory_coach FOREIGN KEY (coach_id) REFERENCES public.coach(coach_id);


--
-- TOC entry 4978 (class 2606 OID 49237)
-- Name: train_coach fk_train_coach_coach; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train_coach
    ADD CONSTRAINT fk_train_coach_coach FOREIGN KEY (coach_id) REFERENCES public.coach(coach_id) ON DELETE RESTRICT;


--
-- TOC entry 4979 (class 2606 OID 49232)
-- Name: train_coach fk_train_coach_train; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.train_coach
    ADD CONSTRAINT fk_train_coach_train FOREIGN KEY (train_id) REFERENCES public.train(train_id) ON DELETE CASCADE;


--
-- TOC entry 4958 (class 2606 OID 42068)
-- Name: login_history login_history_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.login_history
    ADD CONSTRAINT login_history_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4959 (class 2606 OID 42073)
-- Name: notification_info notification_info_notification_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notification_info
    ADD CONSTRAINT notification_info_notification_id_fkey FOREIGN KEY (notification_id) REFERENCES public.notification(notification_id);


--
-- TOC entry 4960 (class 2606 OID 42078)
-- Name: notification_info notification_info_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notification_info
    ADD CONSTRAINT notification_info_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4961 (class 2606 OID 42083)
-- Name: route route_destination_station_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route
    ADD CONSTRAINT route_destination_station_id_fkey FOREIGN KEY (destination_station_id) REFERENCES public.station(station_id);


--
-- TOC entry 4962 (class 2606 OID 42088)
-- Name: route route_source_station_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route
    ADD CONSTRAINT route_source_station_id_fkey FOREIGN KEY (source_station_id) REFERENCES public.station(station_id);


--
-- TOC entry 4963 (class 2606 OID 42093)
-- Name: route_station route_station_route_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route_station
    ADD CONSTRAINT route_station_route_id_fkey FOREIGN KEY (route_id) REFERENCES public.route(route_id);


--
-- TOC entry 4964 (class 2606 OID 42098)
-- Name: route_station route_station_station_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.route_station
    ADD CONSTRAINT route_station_station_id_fkey FOREIGN KEY (station_id) REFERENCES public.station(station_id);


--
-- TOC entry 4965 (class 2606 OID 42103)
-- Name: schedule schedule_route_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schedule
    ADD CONSTRAINT schedule_route_id_fkey FOREIGN KEY (route_id) REFERENCES public.route(route_id);


--
-- TOC entry 4966 (class 2606 OID 42108)
-- Name: schedule schedule_train_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.schedule
    ADD CONSTRAINT schedule_train_id_fkey FOREIGN KEY (train_id) REFERENCES public.train(train_id);


--
-- TOC entry 4968 (class 2606 OID 42123)
-- Name: seat_inventory seat_inventory_schedule_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.seat_inventory
    ADD CONSTRAINT seat_inventory_schedule_id_fkey FOREIGN KEY (schedule_id) REFERENCES public.schedule(schedule_id);


--
-- TOC entry 4974 (class 2606 OID 42128)
-- Name: ticket_booking ticket_booking_booking_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_booking
    ADD CONSTRAINT ticket_booking_booking_id_fkey FOREIGN KEY (booking_id) REFERENCES public.booking(booking_id);


--
-- TOC entry 4975 (class 2606 OID 42133)
-- Name: ticket_booking ticket_booking_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_booking
    ADD CONSTRAINT ticket_booking_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- TOC entry 4976 (class 2606 OID 42138)
-- Name: ticket_cancellation ticket_cancellation_processed_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_cancellation
    ADD CONSTRAINT ticket_cancellation_processed_by_fkey FOREIGN KEY (processed_by) REFERENCES public.admin(admin_id);


--
-- TOC entry 4977 (class 2606 OID 42143)
-- Name: ticket_cancellation ticket_cancellation_ticket_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket_cancellation
    ADD CONSTRAINT ticket_cancellation_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.ticket(ticket_id);


--
-- TOC entry 4969 (class 2606 OID 42148)
-- Name: ticket ticket_fare_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_fare_id_fkey FOREIGN KEY (fare_id) REFERENCES public.fare(fare_id);


--
-- TOC entry 4970 (class 2606 OID 42153)
-- Name: ticket ticket_passenger_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_passenger_id_fkey FOREIGN KEY (passenger_id) REFERENCES public.passenger(passenger_id);


--
-- TOC entry 4971 (class 2606 OID 42158)
-- Name: ticket ticket_payment_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_payment_id_fkey FOREIGN KEY (payment_id) REFERENCES public.payment(payment_id);


--
-- TOC entry 4972 (class 2606 OID 42163)
-- Name: ticket ticket_schedule_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_schedule_id_fkey FOREIGN KEY (schedule_id) REFERENCES public.schedule(schedule_id);


--
-- TOC entry 4973 (class 2606 OID 42168)
-- Name: ticket ticket_schedule_id_seat_number_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ticket
    ADD CONSTRAINT ticket_schedule_id_seat_number_fkey FOREIGN KEY (schedule_id, seat_number) REFERENCES public.seat_inventory(schedule_id, seat_number);


-- Completed on 2025-07-29 22:07:47

--
-- PostgreSQL database dump complete
--

